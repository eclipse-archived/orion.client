<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <script src="../requirejs/require.js"></script>
    <script>
        /*eslint-env browser, amd*/
        require({
            baseUrl: '..',
            paths: {
                domReady: 'requirejs/domReady'
            }
        });
        require(["orion/plugin"], function(PluginProvider) {
            (function connect() {
                var pluginProvider = new PluginProvider();
                pluginProvider.connect();

                // plugin is running inside an iframe so get parent's window first.
                var orionWindow = window.parent;

                orionWindow.parent.postMessage({event: "load",source: "orion"}, '*');

                orionWindow.addEventListener('unload', function(event) {
                    orionWindow.parent.postMessage({event: "unload",source: "orion"}, '*');
                });

                orionWindow.document.addEventListener('click', function() {
                    orionWindow.parent.postMessage({event: "click",source: "orion"}, '*');
                });
            })();
        });
    </script>
</head>

<body>
</body>

</html>